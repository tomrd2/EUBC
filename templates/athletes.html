<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>Athlete Management</title>
  <link rel="stylesheet" href="{{ url_for('club_static', filename='style.css') }}">
  <style>
    /* optional tiny polish for boolean chips */
    .chip { display:inline-block; padding:2px 8px; border-radius:12px; font-size:12px; }
    .chip.yes { background:#e8fff0; color:#065f46; border:1px solid #b8f2cd; }
    .chip.no  { background:#fff2f2; color:#a40000; border:1px solid #f3c2c2; }
    td, th { padding:6px 8px; }
    .actions { white-space:nowrap; display:flex; gap:6px; align-items:center; }
    .btn { background:#0074D9; color:#fff; padding:6px 10px; border-radius:4px; text-decoration:none; border:0; cursor:pointer; }
    .btn:hover { background:#005fa3; }
  </style>
</head>
<body>
  {% include "_header.html" %}

  <h2>Add New Athlete</h2>
  <form action="{{ url_for('athletes.add_athlete') }}" method="post">
    <input type="text" name="Full_Name" placeholder="Name" required>
    <input type="text" name="Initials" placeholder="Initials" maxlength="4" required>
    <select name="M_W">
      <option value="M">M</option>
      <option value="W">W</option>
    </select>
    <select name="Side">
      <option value="Bow">Bow</option>
      <option value="Stroke">Stroke</option>
      <option value="Both">Both</option>
      <option value="Neither">Neither</option>
      <option value="Cox">Cox</option>
    </select>
    <label>
      <input type="checkbox" name="Sculls" value="1">
      Sculls
    </label>
    <label>
      <!-- If this was intended as COACH, rename to Coach and use value="1" -->
      <input type="checkbox" name="Cox" value="0">
      Cox
    </label>
    <input type="date" name="Joined" required>
    <input type="email" name="Email" placeholder="Email" required>
    <button class="btn" type="submit">Add Athlete</button>
  </form>

  <h2>Current Athletes</h2>
  <table>
    <thead>
      <tr>
        <th>ID</th><th>Name</th><th>Initials</th><th>Gender</th><th>Side</th>
        <th>Sculls</th><th>Coach</th><th>Joined</th><th>Email</th><th>Action</th>
      </tr>
    </thead>
    <tbody>
      {% for athlete in athletes %}
        <tr>
          <td>{{ athlete.Athlete_ID }}</td>
          <td>{{ athlete.Full_Name }}</td>
          <td>{{ athlete.Initials }}</td>
          <td>{{ athlete.M_W }}</td>
          <td>{{ athlete.Side or '' }}</td>
          <td>
            {% if athlete.Sculls %}
              <span class="chip yes">Yes</span>
            {% else %}
              <span class="chip no">No</span>
            {% endif %}
          </td>
          <td>
            {% if athlete.Coach %}
              <span class="chip yes">Yes</span>
            {% else %}
              <span class="chip no">No</span>
            {% endif %}
          </td>
          <td>{{ athlete.Joined or '' }}</td>
          <td>{{ athlete.Email }}</td>
          <td class="actions">
            <!-- Edit goes to the new detail page -->
            <a class="btn" href="{{ url_for('athletes.athlete_detail', athlete_id=athlete.Athlete_ID) }}">Edit</a>

            <!-- Reset Password stays as its own POST form -->
            <form action="{{ url_for('athletes.reset_password', athlete_id=athlete.Athlete_ID) }}" method="post" style="display:inline;">
              <button class="btn" type="submit"
                onclick="return confirm('Reset password for {{ athlete.Full_Name }} and send email to {{ athlete.Email }} ?')">
                Reset Password
              </button>
            </form>

            <!-- Dashboard link unchanged -->
            <a class="btn" href="{{ url_for('dashboard.athlete_dashboard', athlete_id=athlete.Athlete_ID) }}">Dashboard</a>
          </td>
        </tr>
      {% endfor %}
    </tbody>
  </table>
</body>
</html>
